function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}function scrollToElement(e){const t=document.getElementById(e)
;t&&t.scrollIntoView({behavior:"smooth",block:"start"})}async function addExpandableClickEventListener(){
document.getElementsByClassName("expandable")[0].addEventListener("click",function(){let e=this.querySelector(".arrow")
;var t=document.getElementsByClassName("links")[0];t.style.maxHeight?(t.style.maxHeight=null,
e.textContent="▼"):(t.style.maxHeight=t.scrollHeight+"px",e.textContent="▲",setTimeout(()=>{
document.documentElement.style.scrollBehavior="auto",document.body.style.scrollBehavior="auto",scrollToElement("links"),setTimeout(()=>{
document.documentElement.style.scrollBehavior="smooth",document.body.style.scrollBehavior="smooth"},50)},310))})}
let slidePage=[2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1];function plusSlides(e,t){showSlides(e,slidePage[e-1]+=t)}function showSlides(e,t){
const o=document.querySelectorAll(`.slideshow[data-slideshow-id="${e}"] .slide`),n=document.querySelectorAll(`.indicators-container[data-slideshow-id="${e}"] .indicator`)
;t>o.length&&(slidePage[e-1]=1),t<1&&(slidePage[e-1]=o.length),o.forEach(e=>e.classList.remove("active")),
o[slidePage[e-1]-1].classList.add("active"),n.forEach(e=>e.classList.remove("active")),n[slidePage[e-1]-1].classList.add("active"),
updateSlideshowWidth(e)}function updateSlideshowWidth(e){if(16!==e&&17!==e)return
;const t=document.querySelector(`.slideshow[data-slideshow-id='${e}']`),o=document.querySelector(`.indicators-container[data-slideshow-id='${e}']`),n=t.querySelector(".slide.active .placeholder")
;t.style.maxWidth=n.style.maxWidth,o.style.maxWidth=n.style.maxWidth}function showProgress(){
const e=document.querySelectorAll("img"),t=document.getElementsByClassName("progress-bar")[0];let o=0;const n=()=>{const n=o/e.length*100
;t.style.width=n+"%",o===e.length&&setTimeout(()=>{document.getElementsByClassName("progress-container")[0].style.display="none"},500)}
;e.forEach(e=>{e.addEventListener("load",()=>{o++,n()}),e.addEventListener("error",()=>{o++,dlog(`Error loading image: ${e.src}`),
e.removeAttribute("src"),n()}),e.complete&&e.dispatchEvent(new Event("load"))})}function handleSwipe(e,t,o){const n=o-t
;Math.abs(n)>50&&plusSlides(e,n>0?-1:1)}function addSwipeEvents(){document.querySelectorAll(".slideshow").forEach(e=>{
let t=0,o=0,n=0,r=0,s=!1;const a=e.getAttribute("data-slideshow-id");e.querySelectorAll("img").forEach(e=>{
e.addEventListener("dragstart",e=>e.preventDefault())}),e.addEventListener("touchstart",e=>{t=e.touches[0].clientX,o=e.touches[0].clientY,
s=!1}),e.addEventListener("touchmove",e=>{n=e.touches[0].clientX,r=e.touches[0].clientY,Math.abs(n-t)>Math.abs(r-o)&&(s=!0)}),
e.addEventListener("touchend",()=>{if(s){const e=n-t,s=r-o;Math.abs(e)>Math.abs(s)&&handleSwipe(a,t,n)}}),
e.addEventListener("mousedown",e=>{t=e.clientX,o=e.clientY,s=!0}),e.addEventListener("mousemove",e=>{s&&(n=e.clientX,r=e.clientY)}),
e.addEventListener("mouseup",e=>{if(s){n=e.clientX,r=e.clientY;const i=n-t,l=r-o;Math.abs(i)>Math.abs(l)&&handleSwipe(a,t,n),s=!1}}),
e.addEventListener("mouseleave",()=>{s&&(s=!1)})})}window.addEventListener("load",function(){
document.querySelectorAll("img.lazy").forEach(e=>{e.src=e.getAttribute("data-src"),e.classList.remove("lazy")})})
;let previousWidth=0,zoomMap=new Map;function updateIframeSrc(){window.innerWidth!==previousWidth&&(previousWidth=window.innerWidth,
setIframeSrc("windy"),setIframeSrc("blitzortung"),setIframeSrc("weatherAndRadar"),setIframeSrc("rainViewer"),setIframeSrc("ventussky"))}
function setIframeSrc(e){dlog(`Updating iframe src for ${e}`);const t=document.getElementById(e);if(t){
let o=zoomMap.get(e),n=t.getAttribute("data-src");if(o&&o.length>0){let e=o[0],t=o[1];window.innerWidth<800&&(n=n.replace(e,t))}t.src=n
}else dlog(`${e} not found, skipping updateIframeSrc for ${e}`)}function hideOverlayOnDoubleTap(){
document.querySelectorAll(".if1 .overlay").forEach(e=>{let t=0;e.addEventListener("dblclick",()=>{e.style.display="none"
;let t=getResetButtonFromOverlayId(e.id);t.removeAttribute("style"),setResetButtonToExit(t)}),e.addEventListener("touchend",o=>{
const n=(new Date).getTime(),r=n-t;if(r>0&&r<200){e.style.display="none";let t=getResetButtonFromOverlayId(e.id);t.removeAttribute("style"),
setResetButtonToExit(t),o.preventDefault()}t=n});const o=e.querySelector(".hint");let n=0,r=0;e.addEventListener("touchstart",e=>{
1===e.touches.length&&(r=e.touches[0].clientX,n=e.touches[0].clientY)}),e.addEventListener("touchend",e=>{if(!o)return
;const t=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY,a=Math.abs(t-r),i=Math.abs(s-n);a<10&&i<10&&(o.style.opacity="0.6",
clearTimeout(o._hideTimer),o._hideTimer=setTimeout(()=>{o.style.removeProperty("opacity")},2e3))})})}function updateHintText(){
const e=window.innerWidth<800;document.querySelectorAll(".hint").forEach(t=>{
t.textContent=e?"Dvostruki dodir za pristup interaktivnoj karti":"Dvostruki klik za pristup interaktivnoj karti"})}
function restoreOverlay(e){dlog(`restoreOverlay: ${e}`)
;document.getElementById(e).parentElement.querySelector(".overlay").removeAttribute("style")
;setResetButtonToReset(getResetButtonFromFrameId(e))}function setResetButtonToExit(e){dlog(`setResetButtonToExit: ${e.id}`)
;const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",e=>{e.stopPropagation(),
restoreOverlay(getFrameIdFromResetButtonId(t.id))}),t.textContent="[X]"}function setResetButtonToReset(e){
dlog(`setResetButtonToReset: ${e.id}`);const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",e=>{
e.stopPropagation(),resetIframe(getFrameIdFromResetButtonId(t.id))}),t.textContent="[R]"}function resetIframe(e){
dlog(`Resetting iframe: ${e}`),setIframeSrc(e);const t=getResetButtonFromFrameId(e);t.style.display="none",setResetButtonToExit(t)}
function getResetButtonFromFrameId(e){return document.getElementById("reset"+String(e).charAt(0).toUpperCase()+String(e).slice(1)+"Frame")}
function getResetButtonFromOverlayId(e){return document.getElementById(e.replace("overlay","reset"))}
function getFrameIdFromResetButtonId(e){let t=e.replace("reset","").replace("Frame","")
;return String(t).charAt(0).toLowerCase()+String(t).slice(1)}function setEsslImgSrc(e=1){const t=document.getElementById("essl")
;if(!t)return void dlog("essl img not found, skipping setEsslImgSrc");let o=GetLastInit();e>1&&o.setUTCHours(o.getUTCHours()-12*(e-1))
;let n=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()+(12===o.getUTCHours()?3:2),0,0,0,0)),r=DTGFromDateInHours(o),s=EndValue(n)
;dlog("dtg: "+r),dlog("end: "+s)
;let a=`https://www.stormforecast.eu/map_images/models/archamos/${r.slice(0,6)}/${r}/combi_paramcombi24_${r}_${s}.png`;function i(){
if(e<5)dlog(`Image load failed, try attempt ${e} with dtg: ${r}`),t.removeEventListener("error",i),setEsslImgSrc(e+1);else{
dlog("Image load failed after 5 attempts");const e=document.createElement("span");e.innerHTML="Nema prognoze za traženi period",
t.parentNode.appendChild(e)}}t.removeEventListener("error",i),t.addEventListener("error",i),t.src=a}function GetLastInit(){let e=new Date
;return e=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()>=12?12:0,0,0,0)),e}
function DTGFromDateInHours(e){
return result=e.getUTCFullYear().toString()+pad(e.getUTCMonth()+1,2)+pad(e.getUTCDate(),2)+pad(e.getUTCHours(),2),result}
function EndValue(e){return result=e.getUTCFullYear().toString()+pad(e.getUTCMonth()+1,2)+pad(e.getUTCDate(),2)+"06",result}
function pad(e,t,o){return o=o||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(o)+e}zoomMap.set("windy",["&zoom=7","&zoom=6"]),
zoomMap.set("blitzortung",["#6/","#5/"]),zoomMap.set("weatherAndRadar",["&zoom=7.2","&zoom=6.8"]),
zoomMap.set("rainViewer",[",6.3&",",5.8&"]),zoomMap.set("ventussky",[";6&",";6&"]);let isDebugEnabled=!1;function getUrlParameter(e){
return new URLSearchParams(window.location.search).get(e)}function dlog(...e){isDebugEnabled&&console.log(...e)}
"1"===getUrlParameter("debug")&&(isDebugEnabled=!0),document.addEventListener("DOMContentLoaded",()=>{showProgress(),
addExpandableClickEventListener(),addSwipeEvents(),updateIframeSrc(),hideOverlayOnDoubleTap(),updateHintText(),setEsslImgSrc()}),
window.addEventListener("resize",()=>{clearTimeout(window._resizeTimeout),window._resizeTimeout=setTimeout(()=>{updateIframeSrc(),
updateHintText()},200)});