function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}function scrollToElement(e){const t=document.getElementById(e)
;t&&t.scrollIntoView({behavior:"smooth",block:"start"})}async function addExpandableClickEventListener(){
document.getElementsByClassName("expandable")[0].addEventListener("click",(function(){let e=this.querySelector(".arrow")
;var t=document.getElementsByClassName("links")[0];t.style.maxHeight?(t.style.maxHeight=null,
e.textContent="▼"):(t.style.maxHeight=t.scrollHeight+"px",e.textContent="▲",setTimeout((()=>{
document.documentElement.style.scrollBehavior="auto",document.body.style.scrollBehavior="auto",scrollToElement("links"),setTimeout((()=>{
document.documentElement.style.scrollBehavior="smooth",document.body.style.scrollBehavior="smooth"}),50)}),310))}))}
let slidePage=[2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1];function plusSlides(e,t){showSlides(e,slidePage[e-1]+=t)}function showSlides(e,t){
const o=document.querySelectorAll(`.slideshow[data-slideshow-id="${e}"] .slide`),n=document.querySelectorAll(`.indicators-container[data-slideshow-id="${e}"] .indicator`)
;t>o.length&&(slidePage[e-1]=1),t<1&&(slidePage[e-1]=o.length),o.forEach((e=>e.classList.remove("active"))),
o[slidePage[e-1]-1].classList.add("active"),n.forEach((e=>e.classList.remove("active"))),n[slidePage[e-1]-1].classList.add("active")}
function showProgress(){const e=document.querySelectorAll("img"),t=document.getElementsByClassName("progress-bar")[0];let o=0;const n=()=>{
const n=o/e.length*100;t.style.width=n+"%",o===e.length&&setTimeout((()=>{
document.getElementsByClassName("progress-container")[0].style.display="none"}),500)};e.forEach((e=>{e.addEventListener("load",(()=>{o++,n()
})),e.addEventListener("error",(()=>{o++,n()})),e.complete&&e.dispatchEvent(new Event("load"))}))}function handleSwipe(e,t,o){const n=o-t
;Math.abs(n)>50&&plusSlides(e,n>0?-1:1)}function addSwipeEvents(){document.querySelectorAll(".slideshow").forEach((e=>{
let t=0,o=0,n=0,s=0,l=!1;const a=e.getAttribute("data-slideshow-id");e.querySelectorAll("img").forEach((e=>{
e.addEventListener("dragstart",(e=>e.preventDefault()))})),e.addEventListener("touchstart",(e=>{t=e.touches[0].clientX,
o=e.touches[0].clientY,l=!1})),e.addEventListener("touchmove",(e=>{n=e.touches[0].clientX,s=e.touches[0].clientY,
Math.abs(n-t)>Math.abs(s-o)&&(l=!0)})),e.addEventListener("touchend",(()=>{if(l){const e=n-t,l=s-o
;Math.abs(e)>Math.abs(l)&&handleSwipe(a,t,n)}})),e.addEventListener("mousedown",(e=>{t=e.clientX,o=e.clientY,l=!0})),
e.addEventListener("mousemove",(e=>{l&&(n=e.clientX,s=e.clientY)})),e.addEventListener("mouseup",(e=>{if(l){n=e.clientX,s=e.clientY
;const i=n-t,r=s-o;Math.abs(i)>Math.abs(r)&&handleSwipe(a,t,n),l=!1}})),e.addEventListener("mouseleave",(()=>{l&&(l=!1)}))}))}
window.addEventListener("load",(function(){document.querySelectorAll("img.lazy").forEach((e=>{e.src=e.getAttribute("data-src"),
e.classList.remove("lazy")}))}));let previousWidth=0;function updateIframeSrc(){if(window.innerWidth!==previousWidth){
const e=document.getElementById("windyFrame"),t=document.getElementById("blitzortungFrame")
;let o=e.getAttribute("data-src"),n=t.getAttribute("data-src");window.innerWidth<800&&(o=o.replace("&zoom=7","&zoom=6"),
n=n.replace("#6/","#5/")),e.src=o,t.src=n,previousWidth=window.innerWidth}}function hideOverlayOnDoubleTap(){
document.querySelectorAll(".if1 .overlay").forEach((e=>{let t=0;e.addEventListener("dblclick",(()=>{e.style.display="none"})),
e.addEventListener("touchend",(o=>{const n=(new Date).getTime(),s=n-t;s>0&&s<200&&(e.style.display="none",o.preventDefault()),t=n}))
;const o=e.querySelector(".hint");let n=0,s=0;e.addEventListener("touchstart",(e=>{1===e.touches.length&&(s=e.touches[0].clientX,
n=e.touches[0].clientY)})),e.addEventListener("touchend",(e=>{if(!o)return
;const t=e.changedTouches[0].clientX,l=e.changedTouches[0].clientY,a=Math.abs(t-s),i=Math.abs(l-n);a<10&&i<10&&(o.style.opacity="0.6",
clearTimeout(o._hideTimer),o._hideTimer=setTimeout((()=>{o.style.removeProperty("opacity")}),2e3))}))}))}function updateHintText(){
const e=window.innerWidth<800;document.querySelectorAll(".hint").forEach((t=>{
t.textContent=e?"Dodirni dvaput za interaktivnu kartu":"Dvostruki klik za interaktivnu kartu"}))}function setEsslImgSrc(){
let[e,t]=GetLastInit(),o=`https://www.stormforecast.eu/map_images/models/archamos/${e.slice(0,6)}/${e}/combi_paramcombi24_${e}_${t}.png`
;console.log("old: https://www.stormforecast.eu/map_images/models/archamos/202506/2025060312/combi_paramcombi24_2025060312_2025060606.png"),
console.log("new: "+o);document.getElementById("essl").src=o}function GetLastInit(){let e=new Date,t=new Date
;e.getUTCHours()>=20?(console.log("d1"),e.setUTCHours(12,0,0,0),t=new Date(e.getTime()),
t.setDate(t.getDate()+3)):e.getUTCHours()>=12&&e.getUTCHours()<20?(console.log("d2"),e.setUTCHours(0,0,0,0),t=new Date(e.getTime()),
t.setDate(t.getDate()+2)):e.getUTCHours()<12&&(console.log("d3"),e.setUTCHours(12,0,0,0),e.setDate(e.getDate()-1),t=new Date(e.getTime()),
t.setDate(t.getDate()+3)),console.log(e),console.log(t),console.log(12),console.log(20);let o=DTGFromDateInHours(e),n=EndValue(t)
;return console.log(o),console.log(n),[o,n]}function DTGFromDateInHours(e){
return result=e.getUTCFullYear().toString()+pad(e.getUTCMonth()+1,2)+pad(e.getUTCDate(),2)+pad(e.getUTCHours(),2),result}
function EndValue(e){return result=e.getUTCFullYear().toString()+pad(e.getUTCMonth()+1,2)+pad(e.getUTCDate(),2)+"06",result}
function pad(e,t,o){return o=o||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(o)+e}
document.addEventListener("DOMContentLoaded",(()=>{showProgress(),addExpandableClickEventListener(),addSwipeEvents(),updateIframeSrc(),
hideOverlayOnDoubleTap(),updateHintText(),setEsslImgSrc()})),window.addEventListener("resize",(()=>{clearTimeout(window._resizeTimeout),
window._resizeTimeout=setTimeout((()=>{updateIframeSrc(),updateHintText()}),200)}));