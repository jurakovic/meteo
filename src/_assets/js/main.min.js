function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}function scrollToElement(e){const t=document.getElementById(e)
;t&&t.scrollIntoView({behavior:"smooth",block:"start"})}async function addExpandableClickEventListener(){
document.getElementsByClassName("expandable")[0].addEventListener("click",(function(){let e=this.querySelector(".arrow")
;var t=document.getElementsByClassName("links")[0];t.style.maxHeight?(t.style.maxHeight=null,
e.textContent="▼"):(t.style.maxHeight=t.scrollHeight+"px",e.textContent="▲",setTimeout((()=>{
document.documentElement.style.scrollBehavior="auto",document.body.style.scrollBehavior="auto",scrollToElement("links"),setTimeout((()=>{
document.documentElement.style.scrollBehavior="smooth",document.body.style.scrollBehavior="smooth"}),50)}),310))}))}
let slidePage=[2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1];function plusSlides(e,t){showSlides(e,slidePage[e-1]+=t)}function showSlides(e,t){
const n=document.querySelectorAll(`.slideshow[data-slideshow-id="${e}"] .slide`),o=document.querySelectorAll(`.indicators-container[data-slideshow-id="${e}"] .indicator`)
;t>n.length&&(slidePage[e-1]=1),t<1&&(slidePage[e-1]=n.length),n.forEach((e=>e.classList.remove("active"))),
n[slidePage[e-1]-1].classList.add("active"),o.forEach((e=>e.classList.remove("active"))),o[slidePage[e-1]-1].classList.add("active")}
function showProgress(){const e=document.querySelectorAll("img"),t=document.getElementsByClassName("progress-bar")[0];let n=0;const o=()=>{
const o=n/e.length*100;t.style.width=o+"%",n===e.length&&setTimeout((()=>{
document.getElementsByClassName("progress-container")[0].style.display="none"}),500)};e.forEach((e=>{e.addEventListener("load",(()=>{n++,o()
})),e.addEventListener("error",(()=>{n++,dlog(`Error loading image: ${e.src}`),e.removeAttribute("src"),o()})),
e.complete&&e.dispatchEvent(new Event("load"))}))}function handleSwipe(e,t,n){const o=n-t;Math.abs(o)>50&&plusSlides(e,o>0?-1:1)}
function addSwipeEvents(){document.querySelectorAll(".slideshow").forEach((e=>{let t=0,n=0,o=0,s=0,a=!1
;const r=e.getAttribute("data-slideshow-id");e.querySelectorAll("img").forEach((e=>{e.addEventListener("dragstart",(e=>e.preventDefault()))
})),e.addEventListener("touchstart",(e=>{t=e.touches[0].clientX,n=e.touches[0].clientY,a=!1})),e.addEventListener("touchmove",(e=>{
o=e.touches[0].clientX,s=e.touches[0].clientY,Math.abs(o-t)>Math.abs(s-n)&&(a=!0)})),e.addEventListener("touchend",(()=>{if(a){
const e=o-t,a=s-n;Math.abs(e)>Math.abs(a)&&handleSwipe(r,t,o)}})),e.addEventListener("mousedown",(e=>{t=e.clientX,n=e.clientY,a=!0})),
e.addEventListener("mousemove",(e=>{a&&(o=e.clientX,s=e.clientY)})),e.addEventListener("mouseup",(e=>{if(a){o=e.clientX,s=e.clientY
;const i=o-t,l=s-n;Math.abs(i)>Math.abs(l)&&handleSwipe(r,t,o),a=!1}})),e.addEventListener("mouseleave",(()=>{a&&(a=!1)}))}))}
window.addEventListener("load",(function(){document.querySelectorAll("img.lazy").forEach((e=>{e.src=e.getAttribute("data-src"),
e.classList.remove("lazy")}))}));let previousWidth=0;function updateIframeSrc(){if(window.innerWidth!==previousWidth){function e(e,t,n){
if(dlog(`Updating iframe src for ${e}`),e){let o=e.getAttribute("data-src");window.innerWidth<800&&(o=o.replace(t,n)),e.src=o
}else dlog(`${e} not found, skipping updateIframeSrc for ${e}`)}previousWidth=window.innerWidth
;const t=document.getElementById("windyFrame"),n=document.getElementById("blitzortungFrame"),o=document.getElementById("weatherAndRadarFrame"),s=document.getElementById("rainViewerFrame"),a=document.getElementById("ventusskyFrame")
;e(t,"&zoom=7","&zoom=6"),e(n,"#6/","#5/"),e(o,"&zoom=7.2","&zoom=6.8"),e(s,",6.3&",",5.8&"),e(a,";6&",";6&")}}
function hideOverlayOnDoubleTap(){document.querySelectorAll(".if1 .overlay").forEach((e=>{let t=0;e.addEventListener("dblclick",(()=>{
e.style.display="none"})),e.addEventListener("touchend",(n=>{const o=(new Date).getTime(),s=o-t;s>0&&s<200&&(e.style.display="none",
n.preventDefault()),t=o}));const n=e.querySelector(".hint");let o=0,s=0;e.addEventListener("touchstart",(e=>{
1===e.touches.length&&(s=e.touches[0].clientX,o=e.touches[0].clientY)})),e.addEventListener("touchend",(e=>{if(!n)return
;const t=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,r=Math.abs(t-s),i=Math.abs(a-o);r<10&&i<10&&(n.style.opacity="0.6",
clearTimeout(n._hideTimer),n._hideTimer=setTimeout((()=>{n.style.removeProperty("opacity")}),2e3))}))}))}function updateHintText(){
const e=window.innerWidth<800;document.querySelectorAll(".hint").forEach((t=>{
t.textContent=e?"Dodirni dvaput za interaktivnu kartu":"Dvostruki klik za interaktivnu kartu"}))}function setEsslImgSrc(e=1){
const t=document.getElementById("essl");if(!t)return void dlog("essl img not found, skipping setEsslImgSrc");let n=GetLastInit()
;e>1&&n.setUTCHours(n.getUTCHours()-12*e)
;let o=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()+(12===n.getUTCHours()?3:2),0,0,0,0)),s=DTGFromDateInHours(n),a=EndValue(o)
;dlog("dtg: "+s),dlog("end: "+a)
;let r=`https://www.stormforecast.eu/map_images/models/archamos/${s.slice(0,6)}/${s}/combi_paramcombi24_${s}_${a}.png`;function i(){
if(e<4)dlog(`Image load failed, try attempt ${e} with dtg: ${s}`),t.removeEventListener("error",i),setEsslImgSrc(e+1);else{
dlog("Image load failed after 4 attempts");const e=document.createElement("span");e.innerHTML="Nema prognoze za traženi period",
t.parentNode.appendChild(e)}}t.removeEventListener("error",i),t.addEventListener("error",i),t.src=r}function GetLastInit(){let e=new Date
;return e=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()>=12?12:0,0,0,0)),
e.setUTCHours(e.getUTCHours()-12),e}function DTGFromDateInHours(e){
return result=e.getUTCFullYear().toString()+pad(e.getUTCMonth()+1,2)+pad(e.getUTCDate(),2)+pad(e.getUTCHours(),2),result}
function EndValue(e){return result=e.getUTCFullYear().toString()+pad(e.getUTCMonth()+1,2)+pad(e.getUTCDate(),2)+"06",result}
function pad(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e}let isDebugEnabled=!1;function getUrlParameter(e){
return new URLSearchParams(window.location.search).get(e)}function dlog(...e){isDebugEnabled&&console.log(...e)}
"1"===getUrlParameter("debug")&&(isDebugEnabled=!0),document.addEventListener("DOMContentLoaded",(()=>{showProgress(),
addExpandableClickEventListener(),addSwipeEvents(),updateIframeSrc(),hideOverlayOnDoubleTap(),updateHintText(),setEsslImgSrc()})),
window.addEventListener("resize",(()=>{clearTimeout(window._resizeTimeout),window._resizeTimeout=setTimeout((()=>{updateIframeSrc(),
updateHintText()}),200)}));