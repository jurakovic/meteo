<!DOCTYPE html>
<html lang="hr-HR">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Meteo radari</title>
	<style>
		body {
			background-color: #212f45;
			font-family: monospace;
			min-height: 100vh;
			margin: 0px;
			padding: 0px;
		}

		.container {
			margin: 8px;
		}

		h2, a, td {
			color: white;
		}

		table {
			width: 100%;
			max-width: 875px;
			height: auto;
		}

		.placeholder {
			background-color: #202c40;
		}

		img {
			max-width: 100%;
			height: auto;
			display: block;
			border: 0;
		}

		.if1 {
			position: relative;
			width: 100%;
			overflow: hidden;
			padding-top: 100%;
		}

			.if1 .overlay {
				position: absolute;
				top: 10%;
				left: 0;
				width: 100%;
				height: 83%;
			}

		@media (max-width: 800px) {
			.if1 {
				padding-top: 110%;
			}

				.if1 .overlay {
					top: 8%;
					width: 91%;
					height: 76%;
				}
		}

		.if2 {
			position: relative;
			width: 100%;
			overflow: hidden;
			padding-top: 115%;
		}

		.vid1 {
			position: relative;
			width: 100%;
			overflow: hidden;
			padding-top: 67%;
		}

		.vid2 {
			position: relative;
			width: 100%;
			overflow: hidden;
			padding-top: 87%;
		}

		iframe, video {
			position: absolute;
			top: 0;
			left: 0;
			bottom: 0;
			right: 0;
			width: 100%;
			height: 100%;
			border: none;
		}

		.sp {
			height: 10px;
		}



	</style>
	<script>


		let previousWidth = 0;

		function updateIframeSrc() {
			if (window.innerWidth !== previousWidth) {
				const windyFrame = document.getElementById('windyFrame');
				const blitzortungFrame = document.getElementById('blitzortungFrame');

				let wurl = windyFrame.getAttribute('data-src');
				let burl = blitzortungFrame.getAttribute('data-src');

				if (window.innerWidth < 800) {
					wurl = wurl.replace('&zoom=7', '&zoom=6')
					burl = burl.replace('#6/', '#5/')
				}

				windyFrame.src = wurl;
				blitzortungFrame.src = burl;

				previousWidth = window.innerWidth;
			}
		}

		function hideOverlayOnDoubleTap() {

			const overlays = document.querySelectorAll('.if1 .overlay');
			console.log(overlays);

			overlays.forEach((overlay) => {
				console.log("aaa");
				let lastTap = 0;

				overlay.addEventListener('dblclick', () => {
					overlay.style.display = 'none';
					console.log("dblclick, hide div");
				});

				overlay.addEventListener('touchend', (e) => {
					const currentTime = new Date().getTime();
					const tapLength = currentTime - lastTap;
					console.log("touchend");
					console.log(tapLength);

					if (tapLength > 0 && tapLength < 200) {
						overlay.style.display = 'none';
						e.preventDefault(); // prevent unintended behavior (e.g. zoom)
						console.log("hide div");
					}

					lastTap = currentTime;
				});
			});
		}

		document.addEventListener('DOMContentLoaded', updateIframeSrc);
		document.addEventListener('DOMContentLoaded', hideOverlayOnDoubleTap);

		window.addEventListener('resize', () => {
			clearTimeout(window._resizeTimeout); // Optional: debounce to avoid excessive reloads
			window._resizeTimeout = setTimeout(updateIframeSrc, 200);
		});

	</script>
</head>
<body>
	<div class="container">
		<h2 align="center">Meteo radari</h2>
		<hr>
		<table border="0" align="center" cellpadding="0" cellspacing="0">
			<tr>
				<td align="center">
					<a href="https://www.windy.com/-Radar-lightning-radar?radar,44.5,16.5,8" target="_blank" rel="nofollow">Windy</a>
					<div class="if1 placeholder">
						<iframe id="windyFrame" loading="lazy" data-src="https://embed.windy.com/embed2.html?lat=44.5&lon=16.56&zoom=7&level=surface&overlay=radar&menu=&message=true&marker=&calendar=&pressure=&type=map&location=coordinates&detail=&detailLat=45.798&detailLon=15.936&metricWind=m%2Fs&metricTemp=%C2%B0C&radarRange=-1" frameborder="0"></iframe>
						<div class="overlay" />
					</div>
				</td>
			</tr>

			<tr>
				<td align="center">
					<a href="https://map.blitzortung.org/#6/44.5/16.5" target="_blank" rel="nofollow">Blitzortung.org | Munje</a>
					<div class="if1 placeholder">
						<iframe id="blitzortungFrame" loading="lazy" data-src="https://map.blitzortung.org/index.php?interactive=0&NavigationControl=1&FullScreenControl=0&Cookies=0&InfoDiv=0&MenuButtonDiv=0&ScaleControl=0&CirclesRangeValue=1&LinksCheckboxChecked=0&LinksRangeValue=0&MapStyle=1&MapStyleRangeValue=3&Advertisment=0#6/44.5/16.5" frameborder="0"></iframe>
						<div class="overlay" />
					</div>
				</td>
			</tr>
		</table>
	</div>
</body>
</html>
