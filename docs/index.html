<!DOCTYPE html>
<html lang="hr-HR">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Meteo radari</title>
	<style>
		body {
			background-color: #212f45;
			font-family: monospace;
			min-height: 100vh;
			margin: 0px;
			padding: 0px;
		}

		.container {
			margin: 8px;
		}

		h2, a, td {
			color: white;
		}

		table {
			width: 100%;
			max-width: 875px;
			height: auto;
		}

		.placeholder {
			background-color: #202c40;
		}

		img {
			max-width: 100%;
			height: auto;
			display: block;
			border: 0;
		}
		.sp {
			height: 10px;
		}

		.slideshow {
			position: relative;
			display: flex;
			justify-content: center;
		}

		.slide {
			display: none;
		}

			.slide.active {
				display: block;
			}

		.prev, .next {
			cursor: pointer;
			position: absolute;
			align-content: center;
			top: 0;
			bottom: 0;
			width: 15%;
			padding: 16px;
			color: transparent;
			opacity: 0.7;
			font-weight: bold;
			font-size: 36px;
			transition: 0.6s ease;
			user-select: none;
		}

		.prev {
			left: 0;
			text-align: left;
		}

			.prev:hover {
				background-image: linear-gradient(to left, transparent, rgba(0,0,0,0.6));
				color: white;
			}

			.prev.shorter {
				top: 0.4em;
			}

		.next {
			right: 0;
			text-align: right;
		}

			.next:hover {
				background-image: linear-gradient(to right, transparent, rgba(0,0,0,0.6));
				color: white;
			}

			.next.shorter {
				top: 0.4em;
			}

		.fade {
			animation-name: fade;
			animation-duration: 1s;
		}

		@keyframes fade {
			from {
				opacity: .6
			}

			to {
				opacity: 1
			}
		}

		@media (max-width: 800px) {
			.prev, .next {
				padding: 12px;
				font-size: 20px;
			}

				.prev.shorter, .next.shorter {
					top: 0.72em;
				}
		}

		.indicators-container {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 4px;
			width: 100%;
			margin-top: 1px;
		}

		.indicator {
			height: 3px;
			background-color: #5c5c5c80;
			transition: background-color 0.3s;
		}

			.indicator.active {
				background-color: #c7c7c7;
			}

		@media (max-width: 800px) {
			.indicator {
				height: 2px;
			}
		}

	</style>
	<script>

		let slidePage = [2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];

		function plusSlides(slideshowId, n) {
			showSlides(slideshowId, slidePage[slideshowId - 1] += n);
		}

		function showSlides(slideshowId, n) {
			const slides = document.querySelectorAll(`.slideshow[data-slideshow-id="${slideshowId}"] .slide`);
			const indicators = document.querySelectorAll(`.indicators-container[data-slideshow-id="${slideshowId}"] .indicator`);
			if (n > slides.length) { slidePage[slideshowId - 1] = 1; }
			if (n < 1) { slidePage[slideshowId - 1] = slides.length; }
			slides.forEach(slide => slide.classList.remove('active'));
			slides[slidePage[slideshowId - 1] - 1].classList.add('active');
			indicators.forEach(indicator => indicator.classList.remove('active'));
			indicators[slidePage[slideshowId - 1] - 1].classList.add('active');
		}

		window.addEventListener('load', function () {
			const lazyImages = document.querySelectorAll('img.lazy');

			lazyImages.forEach(img => {
				img.src = img.getAttribute('data-src');
				img.classList.remove('lazy');
			});
		});


		function handleSwipe(slideshowId, startX, endX) {
			const threshold = 50;
			const distance = endX - startX;

			if (Math.abs(distance) > threshold) {
				if (distance > 0) {
					plusSlides(slideshowId, -1); // swipe right
				} else {
					plusSlides(slideshowId, 1); // swipe left
				}
			}
		}

		function addSwipeEvents() {
			const slideshows = document.querySelectorAll('.slideshow');

			slideshows.forEach(slideshow => {
				let startX = 0;
				let startY = 0;
				let endX = 0;
				let endY = 0;
				let isDragging = false;
				const slideshowId = slideshow.getAttribute('data-slideshow-id');

				// Prevent default drag behavior on images
				const images = slideshow.querySelectorAll('img');
				images.forEach(img => {
					img.addEventListener('dragstart', (e) => e.preventDefault());
				});

				// Touch events for mobile
				slideshow.addEventListener('touchstart', (e) => {
					startX = e.touches[0].clientX;
					startY = e.touches[0].clientY;
					isDragging = false;
				});

				slideshow.addEventListener('touchmove', (e) => {
					endX = e.touches[0].clientX;
					endY = e.touches[0].clientY;

					// If the finger moves horizontally, set isDragging to true
					if (Math.abs(endX - startX) > Math.abs(endY - startY)) {
						isDragging = true;
					}
				});

				slideshow.addEventListener('touchend', () => {
					if (isDragging) {
						const deltaX = endX - startX;
						const deltaY = endY - startY;

						// Only trigger swipe if horizontal movement is greater than vertical movement (prevent swipe on scroll up or down)
						if (Math.abs(deltaX) > Math.abs(deltaY)) {
							handleSwipe(slideshowId, startX, endX);
						}
					}
				});

				// Mouse events for desktop
				slideshow.addEventListener('mousedown', (e) => {
					startX = e.clientX;
					startY = e.clientY;
					isDragging = true;
				});

				slideshow.addEventListener('mousemove', (e) => {
					if (isDragging) {
						endX = e.clientX;
						endY = e.clientY;
					}
				});

				slideshow.addEventListener('mouseup', (e) => {
					if (isDragging) {
						endX = e.clientX;
						endY = e.clientY;
						const deltaX = endX - startX;
						const deltaY = endY - startY;

						// Only trigger swipe if horizontal movement is greater than vertical movement (prevent swipe on scroll up or down)
						if (Math.abs(deltaX) > Math.abs(deltaY)) {
							handleSwipe(slideshowId, startX, endX);
						}
						isDragging = false;
					}
				});

				// Handle mouse leaving the slideshow area
				slideshow.addEventListener('mouseleave', () => {
					if (isDragging) {
						isDragging = false;
					}
				});
			});
		}

		document.addEventListener('DOMContentLoaded', () => {
			addSwipeEvents();
		});
	</script>
</head>
<body>
	<div class="container">
		<h2 align="center">Meteo radari</h2>
		<hr>
		<table border="0" align="center" cellpadding="0" cellspacing="0">
			<tr>
				<td align="center">
					<a href="https://www.neverin.hr/radar/" target="_blank" rel="nofollow">Neverin | Radar | Hrvatska</a>
					<div class="slideshow placeholder" data-slideshow-id="1" style="aspect-ratio: 875 / 625;">
						<div class="slide fade">
							<img data-src="https://maps.neverin.hr/radar/latest_hr.webp" class="lazy" />
						</div>
						<div class="slide fade active">
							<img src="https://maps.neverin.hr/radar/anim_hr.webp" />
						</div>
						<div class="slide fade">
							<img data-src="https://maps.neverin.hr/radar/anim_hr_6h.webp" class="lazy" />
						</div>
						<a class="prev" onclick="plusSlides(1, -1)">&#10094;</a>
						<a class="next" onclick="plusSlides(1, 1)">&#10095;</a>
					</div>
					<div class="indicators-container" data-slideshow-id="1">
						<span class="indicator"></span>
						<span class="indicator active"></span>
						<span class="indicator"></span>
					</div>
				</td>
			</tr>
			<tr class="sp"></tr>
		</table>
	</div>
</body>
</html>
